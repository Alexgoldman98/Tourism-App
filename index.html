<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- the following two links is to use the toggle for navbar -->
    <!--line 8 doesn't work so we commented it out-->
    <!-- <script src=“https://code.jquery.com/jquery-2.1.3.min.js”></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    <!-- the following link is used to get the time-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.0.1/mapbox-gl.css' rel='stylesheet' />
    <title>Tourism</title>
</head>
<body>
    <!-- hero image address: https://studyinginswitzerland.com/wp-content/uploads/2019/09/damian-markutt-eCkmZ7f8oWY-unsplash.jpg -->
    <div id="homepage" class="d-none" >
        <div id="hero" style="height: 400px; border-bottom: 1px solid black; position: relative;">
            <nav class="navbar navbar-expand-lg navbar-light" style="background-color:#0d4eae;"> <!--2A7BBB-->
                <div class="container-fluid">
                    <a id="navbar-brand" class="navbar-brand" href="index.html"><img id="logo" src="Assets/icon.png" style="position: fixed; top: 5px; left: 5px;" width="40px" height="40px"></a>
                    <!-- <a href="#"><img id="logo" src="Assets/icon.png" style="position: fixed; top: 5px; left: 5px;" width="50px" height="50px">Hello</a> -->
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav" dir="rtl">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a id="btnFavourite" class="nav-link active coloredbutton" aria-current="page" href="#" style="color: white;">Favourite</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav> <!--end of navbar-->
            <!-- <a href="#"><img id="logo" src="Assets/icon.png" style="position: fixed; top: 5px; left: 5px;" width="50px" height="50px"></a> -->
           <h3 style=" color: white; margin: 0; top: 50%; left: 50%; position: absolute; -ms-transform: translate(-50%,-50%); transform: translate(-50%, -50%);">“Once a year, go someplace you’ve never been before”</h3>
            <div style="top: 80%; left: 37%; position: absolute; width: auto;">
                <form onSubmit="search(event)" id="searchForm">
                    <input id="userCity" type="text" class="form-control" placeholder="Enter your destination" style="width: 300px; display: inline; ">
                    <!-- <input style="width: 300px;"> -->
                    <button type="submit" class="btn btn-primary" form="searchForm">Search</button>
                </form>
            </div> <!--end of search input and button container-->
        </div> <!--end of hero container-->
        <br/>
        <h2 style="text-align: center; font-family: Arial, Helvetica, sans-serif;">Top three destinations for 2021</h2>
        <br>
        <div id="cardContainer" class="container">
            <div class="row"> <!-- row starts here-->
                <div id="cardOne" class="card col" style="width: 18rem; position: relative; margin-right: 15px; width: 150px; height: 150px;">
                    <!--Bali image address: https://media.timeout.com/images/105240189/image.jpg-->
                    <div class="card-body" style=" margin: 0; top: 50%; left: 50%; position: absolute; -ms-transform: translate(-50%,-50%); transform: translate(-50%, -50%);">
                        <button href="#" class="btn btn-primary" type="button" >Bali - Indonesia</button>
                    </div>
                </div> <!--end of second card-->
                <div id="cardTwo" class="card col" style="width: 18rem; position: relative; margin-right: 15px; width: 150px; height: 150px;">
                    <!--Paris image address: https://media.tacdn.com/media/attractions-splice-spp-674x446/07/03/1c/9c.jpg-->
                    <div class="card-body" style=" margin: 0; top: 50%; left: 50%; position: absolute; -ms-transform: translate(-50%,-50%); transform: translate(-50%, -50%);">
                        <button href="#" class="btn btn-primary" type="button" >Paris - France</button>
                    </div>
                </div> <!--end of second card-->
                <div id="cardThree" class="card col" style="width: 18rem; position: relative; width: 150px; height: 150px;">
                    <!--Mykonos image address: https://blog.travala.com/wp-content/uploads/2020/03/Mykonos.jpg-->
                    <div class="card-body" style=" margin: 0; top: 50%; left: 50%; position: absolute; -ms-transform: translate(-50%,-50%); transform: translate(-50%, -50%);">
                        <button href="#" class="btn btn-primary" type="button" >Mykonos - Greece</button>
                    </div>
                </div> <!--end of third card-->
            </div> <!-- end of row -->
        </div><!--end of car container-->
    </div>
    <div id="search-results" >
        <nav class="navbar navbar-light sticky-sm-top" style="background-color:#0d4eae;">
            <div class="container-fluid">
                <button id = "btnSearch" class="btn bg-transparent" onclick="showHomePage()"><img id="logo" src="Assets/icon.png" style="position: fixed; top: 5px; left: 5px;" width="40px" height="40px"></button>
              <div class="d-flex justify-content-center ">
                <input class = "form-control"type="search" placeholder="Enter your destination">
                <button id = "btnSearch" type="button" class="d-none d-md-block  btn bg-transparent" style="color: white" onclick="showSearchPage()">Search</button>
              </div>
              <form class="d-flex justify-content-center">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav" dir="rtl">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <button id = "btnFavourite" type="button" class="btn bg-transparent" style="color: white" onclick="showFavouritesPage()">Favourite</button> 
                        </li>
                    </ul>
                </div>
              </form>
            </div>
          </nav>
    </div>
    <div id="favourites" class = "d-none" >
        <nav class="navbar navbar-light sticky-sm-top" style="background-color:#0d4eae;">
            <div class="container-fluid">
                <button id = "btnSearch" class="btn bg-transparent" onclick="showHomePage()"><img id="logo" src="Assets/icon.png" style="position: fixed; top: 5px; left: 5px;" width="40px" height="40px"></button>
              <div class="d-flex justify-content-center">
                <input class = "form-control"type="search">
                <button id = "btnSearch" type="button" class="d-none d-md-block btn bg-transparent" style="color: white" onclick="showSearchPage()">Search</button>
              </div>
              <form class="d-flex justify-content-center">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav" dir="rtl">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <button id = "btnFavourite" type="button" class="btn bg-transparent" style="color: white" onclick="showFavouritesPage()">Favourite</button> 
                        </li>
                    </ul>
                </div>
              </form>
            </div>
        </nav>
    </div>
    <div id="city-information" class = "d-none"> 
        <nav class="navbar navbar-light sticky-sm-top" style="background-color:#0d4eae;">
            <div class="container-fluid">
                <button id = "btnSearch" class="btn bg-transparent" onclick="showHomePage()"><img id="logo" src="Assets/icon.png" style="position: fixed; top: 5px; left: 5px;" width="40px" height="40px"></button>
              <div class="d-flex justify-content-center">
                <input class = "form-control"type="search">
                <button id = "btnSearch" type="button" class="d-none d-md-block btn bg-transparent" style="color: white" onclick="showSearchPage()">Search</button>
              </div>
              <form class="d-flex justify-content-center">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav" dir="rtl">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <button id = "btnFavourite" type="button" class="btn bg-transparent" style="color: white" onclick="showFavouritesPage()">Favourite</button> 
                        </li>
                    </ul>
                </div>
              </form>
            </div>
        </nav>
        <div id="weatherContainer" class="container" style="margin-bottom: 15px;">
            <!-- weather information for a city starts here-->
            <div class="row">
                <div id="cardCurrentWeather" class="card col col-lg-9"
                    style=" position: relative; width: auto; height: auto; margin-right: 15px;">
                    <h3 style="background-color: #0C6EFD; text-align: center; color: white; margin-top: 10px;">Current
                        weather:</h3>
                    <div class="card-body">
                        <h4><span id="cityName">Toronto</span> - <span id="dateNow"></span> <img id="icon"></h4>
                        <p>Temperature: <span id="temperature"></span> &#8457;</p>
                        <p>Humidity: <span id="humidity"></span> &percnt;</p>
                        <p>Wind Speed: <span id="windSpeed"></span> MPH</p>
                        <p>UV Index: <span id="UVIndex" style=" color: white;"></span></p>
                    </div>
                </div>
                <!--end of current weather card-->
                <div id="cardForecastWeather" class="card col" style=" position: relative; width: auto; height: auto;">
                    <h3 style="background-color: #0C6EFD; text-align: center; color: white; margin-top: 10px;">5 Days
                        Forecast:</h3>
                    <div class="card-body row">
                        <!-- day one forecast card starts here-->
                        <div class="card" class="col"
                            style="width: 10rem; margin-right: 12px; background-color:#017BFE; color: white; margin-top: 10px;">
                            <p id="dateOne"><strong></strong></p>
                            <img id="iconOne" width="50px" height="50px">
                            <p>Temp: <span id="tempOne"></span> &#8457;</p>
                            <p>Humidity: <span id="humiOne"></span> &percnt;</p>
                        </div>
                        <!--end of card one-->
                        <div class="card" class="col"
                            style="width: 10rem; margin-right: 12px; background-color:#017BFE; color: white; margin-top: 10px;">
                            <p id="dateTwo"><strong></strong></p>
                            <img id="iconTwo" width="50px" height="50px">
                            <p>Temp: <span id="tempTwo"></span> &#8457;</p>
                            <p>Humidity: <span id="humiTwo"></span> &percnt;</p>
                        </div>
                        <!--end of card two-->
                        <div class="card" class="col"
                            style="width: 10rem; margin-right: 12px; background-color:#017BFE; color: white; margin-top: 10px;">
                            <p id="dateThree"><strong></strong></p>
                            <img id="iconThree" width="50px" height="50px">
                            <p>Temp: <span id="tempThree"></span> &#8457;</p>
                            <p>Humidity: <span id="humiThree"></span> &percnt;</p>
                        </div>
                        <!--end of card three-->
                        <div class="card" class="col"
                            style="width: 10rem; margin-right: 12px; background-color:#017BFE; color: white; margin-top: 10px;">
                            <p id="dateFour"><strong></strong></p>
                            <img id="iconFour" width="50px" height="50px">
                            <p>Temp: <span id="tempFour"></span> &#8457;</p>
                            <p>Humidity: <span id="humiFour"></span> &percnt;</p>
                        </div>
                        <!--end of card four-->
                        <div class="card" class="col"
                            style="width: 10rem; margin-right: 12px; background-color:#017BFE; color: white; margin-top: 10px;">
                            <p id="dateFive"><strong></strong></p>
                            <img id="iconFive" width="50px" height="50px">
                            <p>Temp: <span id="tempFive"></span> &#8457;</p>
                            <p>Humidity: <span id="humiFive"></span> &percnt;</p>
                        </div>
                        <!--end of card five-->
                    </div>
                    <!--end of card-body -->
                </div>
                <!--end of forecast weather card-->
            </div>
            <!--end of weather main row-->
        </div>
        <!--end of weather container-->
         <!-- Map API-->
        <div 
        id='map' style='width: 1000px; height: 300px;' class = 'container col w-100'>
    </div>
    </div>
    <script src = "script.js"></script>
    <script>

        // a function that takes two parameters; city name & state code to display the weather
        getCity("Paris", "FR")

        async function getCity(city, stateCode) {

            // the following 4 lines used to hide divs
            // document.querySelector('#').classList.add('d-none');
            // document.querySelector('#').classList.add('d-none');
            // document.querySelector('#').classList.add('d-none');
            // document.querySelector('#').classList.add('d-none');

            var cityApi = await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${encodeURI(city)},${stateCode}&appid=c18d1c67b725426cb4da6690f0f0a919`).then(r => r.json())
            var cityLon = cityApi.coord.lon;
            var cityLat = cityApi.coord.lat;

            // takes the name of the city and display it a value of CityName
            document.querySelector('#cityName').innerHTML = cityApi.name

            getCityData(cityLon, cityLat);
            // cities.push(city);
            //  addCity();

            // console.log(city);   
        }

        async function getCityData(lon, lat) {
            var cityDataApi = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&units=imperial&appid=c18d1c67b725426cb4da6690f0f0a919`).then(r => r.json())

            var temperature = cityDataApi.current.temp;
            var humadity = cityDataApi.current.humidity;
            var windSpeed = cityDataApi.current.wind_speed;
            var uvIndex = cityDataApi.current.uvi;
            var icon = cityDataApi.current.weather[0].icon;


            if (uvIndex >= 0 && uvIndex <= 2) {
                document.querySelector('#UVIndex').style.backgroundColor = "green";
                document.querySelector('#UVIndex').style.color = "white";
            }
            else if (uvIndex >= 3 && uvIndex <= 5) {
                document.querySelector('#UVIndex').style.backgroundColor = "yellow";
                document.querySelector('#UVIndex').style.color = "black";
            }
            else if (uvIndex >= 6 && uvIndex <= 7) {
                document.querySelector('#UVIndex').style.backgroundColor = "orange";
            }
            else if (uvIndex >= 11 && uvIndex <= 10) {
                document.querySelector('#UVIndex').style.backgroundColor = "red";
                document.querySelector('#UVIndex').style.color = "white";
            }
            else if (uvIndex >= 11) {
                document.querySelector('#UVIndex').style.backgroundColor = "purple";
            }
            var dayOneForecast = {
                dateOne: moment().add(1, 'days').format('MMMM Do YYYY'),
                temp: cityDataApi.daily[1].temp.day,
                humi: cityDataApi.daily[1].humidity,
                icon: cityDataApi.daily[1].weather[0].icon
            }

            var dayTwoForecast = {
                dateTwo: moment().add(2, 'days').format('MMMM Do YYYY'),
                temp: cityDataApi.daily[2].temp.day,
                humi: cityDataApi.daily[2].humidity,
                icon: cityDataApi.daily[2].weather[0].icon
            }

            var dayThreeForecast = {
                dateThree: moment().add(3, 'days').format('MMMM Do YYYY'),
                temp: cityDataApi.daily[3].temp.day,
                humi: cityDataApi.daily[3].humidity,
                icon: cityDataApi.daily[3].weather[0].icon
            }

            var dayFourForecast = {
                dateFour: moment().add(4, 'days').format('MMMM Do YYYY'),
                temp: cityDataApi.daily[4].temp.day,
                humi: cityDataApi.daily[4].humidity,
                icon: cityDataApi.daily[4].weather[0].icon
            }

            var dayFiveForecast = {
                dateFive: moment().add(5, 'days').format('MMMM Do YYYY'),
                temp: cityDataApi.daily[5].temp.day,
                humi: cityDataApi.daily[5].humidity,
                icon: cityDataApi.daily[5].weather[0].icon
            }

            showCurrentWeather(temperature, humadity, windSpeed, uvIndex, icon)

            dayOne(dayOneForecast.dateOne, `https://openweathermap.org/img/wn/${dayOneForecast.icon}.png`, dayOneForecast.temp, dayOneForecast.humi)

            dayTwo(dayTwoForecast.dateTwo, `https://openweathermap.org/img/wn/${dayTwoForecast.icon}.png`, dayTwoForecast.temp, dayTwoForecast.humi)

            dayThree(dayThreeForecast.dateThree, `https://openweathermap.org/img/wn/${dayThreeForecast.icon}.png`, dayThreeForecast.temp, dayThreeForecast.humi)

            dayFour(dayFourForecast.dateFour, `https://openweathermap.org/img/wn/${dayFourForecast.icon}.png`, dayFourForecast.temp, dayFourForecast.humi)

            dayFive(dayFiveForecast.dateFive, `https://openweathermap.org/img/wn/${dayFiveForecast.icon}.png`, dayFiveForecast.temp, dayFiveForecast.humi)

        }


        function showCurrentWeather(temp, hum, wind, uv, icon) {

            var dateNow = moment().format('MMMM Do YYYY');
            document.querySelector('#dateNow').innerHTML = dateNow;

            //document.querySelector('#cityName').innerHTML = userCity;
            document.querySelector('#temperature').innerHTML = temp
            document.querySelector('#humidity').innerHTML = hum
            document.querySelector('#windSpeed').innerHTML = wind
            document.querySelector('#UVIndex').innerHTML = uv
            document.querySelector('#icon').src = `https://openweathermap.org/img/wn/${icon}.png`

        }


        function dayOne(dateDayOne, icon, temp, humi) {
            document.querySelector('#dateOne').innerHTML = dateDayOne;
            document.querySelector('#iconOne').src = icon;
            document.querySelector('#tempOne').innerHTML = temp;
            document.querySelector('#humiOne').innerHTML = humi;
        }

        function dayTwo(dateDayTwo, icon, temp, humi) {
            document.querySelector('#dateTwo').innerHTML = dateDayTwo;
            document.querySelector('#iconTwo').src = icon;
            document.querySelector('#tempTwo').innerHTML = temp;
            document.querySelector('#humiTwo').innerHTML = humi;
        }

        function dayThree(dateDayThree, icon, temp, humi) {
            document.querySelector('#dateThree').innerHTML = dateDayThree;
            document.querySelector('#iconThree').src = icon;
            document.querySelector('#tempThree').innerHTML = temp;
            document.querySelector('#humiThree').innerHTML = humi;
        }

        function dayFour(dateDayFour, icon, temp, humi) {
            document.querySelector('#dateFour').innerHTML = dateDayFour;
            document.querySelector('#iconFour').src = icon;
            document.querySelector('#tempFour').innerHTML = temp;
            document.querySelector('#humiFour').innerHTML = humi;
        }

        function dayFive(dateDayFive, icon, temp, humi) {
            document.querySelector('#dateFive').innerHTML = dateDayFive;
            document.querySelector('#iconFive').src = icon;
            document.querySelector('#tempFive').innerHTML = temp;
            document.querySelector('#humiFive').innerHTML = humi;
        }

    </script>
    <script>

        let lng = "-79.3832"
        let lat = "43.6532"

        mapboxgl.accessToken = 'pk.eyJ1IjoiYWxleGdvbGRtYW45OCIsImEiOiJja2tvY21tODIwZnhhMm9udjRvZmpieWtuIn0.TexdX_a_a6lxPC5SGJAIaA';
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11', // stylesheet location
            center: [lng, lat], // starting position [lng, lat]
            pitch: 60,
            bearing: -60,
            zoom: 10, // starting zoom
            antialias: true,
            //["heatmap-density"]: .1,
        });

        map.on('load', function () {
            // Insert the layer beneath any symbol layer.
            var layers = map.getStyle().layers;

            var labelLayerId;
            for (var i = 0; i < layers.length; i++) {
                if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {
                    labelLayerId = layers[i].id;
                    break;
                }
            }

            map.addLayer(
                {
                    'id': '3d-buildings',
                    'source': 'composite',
                    'source-layer': 'building',
                    'filter': ['==', 'extrude', 'true'],
                    'type': 'fill-extrusion',
                    'minzoom': 15,
                    'paint': {
                        'fill-extrusion-color': '#aaa',

                        // use an 'interpolate' expression to add a smooth transition effect to the
                        // buildings as the user zooms in
                        'fill-extrusion-height': [
                            'interpolate',
                            ['linear'],
                            ['zoom'],
                            15,
                            0,
                            15.05,
                            ['get', 'height']
                        ],
                        'fill-extrusion-base': [
                            'interpolate',
                            ['linear'],
                            ['zoom'],
                            15,
                            0,
                            15.05,
                            ['get', 'min_height']
                        ],
                        'fill-extrusion-opacity': 0.6
                    }
                },
                labelLayerId
            );
        });

    </script>
</body>
</html>